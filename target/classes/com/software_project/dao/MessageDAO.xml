<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.software_project.dao.MessageDAO">

    <insert id="insertMessageOne" parameterType="com.software_project.pojo.Message">
        insert into message (userEmail, fundCode, fundname, addWarehouse, netWorthDate, netWorth, expectWorthDate, expectWorth, time,messageType, `read`)
        values (#{userEmail}, #{fundCode}, #{fundName}, #{addWarehouse}, #{netWorthDate}, #{netWorth}, #{expectWorthDate}, #{expectWorth}, NOW(), 0, 0);
    </insert>
    <insert id="insertMessageTwo" parameterType="com.software_project.pojo.FeedBack">
        insert into message (userEmail, message, result,  messageType, time, `read`) values (#{userEmail}, #{message}, #{result}, 1, NOW(),0 );
    </insert>
    <update id="clearNotReadMessage">
        update soft.message set `read` = 1 where `read` = 0 and userEmail = #{userEmail};
    </update>
    <delete id="deleteAllMessage" parameterType="java.lang.String">
        delete from soft.message where userEmail = #{userEmail}
    </delete>
    <select id="getNotReadMessage" resultType="com.software_project.pojo.Message">
        select * from soft.message where `read` = 0 and userEmail = #{userEmail};
    </select>
    <select id="getAllReadMessage" resultType="com.software_project.pojo.Message"
            parameterType="java.lang.String">
        select * from soft.message where userEmail = #{userEmail} and `read` = 1;
    </select>
    <select id="getAllMessage" resultType="com.software_project.pojo.Message"
            parameterType="java.lang.String">
        select * from soft.message where userEmail = #{userEmail};
    </select>
</mapper>