### 前后端数据接口定义



#### User类接口

| 接口功能          | 接口名称         | 输入参数                               | 返回值                                                       |
| ----------------- | ---------------- | -------------------------------------- | ------------------------------------------------------------ |
| 获取验证码        | /user/captcha    | email                                  | 验证码                                                       |
| 账号注册          | /user/register   | email、name、pwd、avatarLink、money    | 返回User对象Json                                             |
| 账号登陆          | /user/login      | email、pwd                             | 返回User对象Json或者错误信息                                 |
| 查询 用户个人信息 | /user/message    | email                                  | 返回User对象的JSON格式数据                                   |
| 用户信息修改      | /user/update     | email、name、money、avatarLink         | 邮箱作为主键不能修改，可以修改其他信息，返回是否修改成功     |
| 修改密码          | /user/modify     | email、pwd（邮箱验证）                 | 返回User对象Json                                             |
| 忘记密码          | /user/resetPwd   | email、pwd（邮箱验证、重置密码）       | 返回User对象Json                                             |
| 重置模拟操作数据  | /user/resetAll   | email、money删除该用户的所有历史数据） | 返回User对象Json                                             |
| 软件反馈          | /user/feedback   | email、feedbackMsg                     | 返回是否成功                                                 |
| 自选列表          | /user/watchList  | email                                  | 返回用户关注的所有基金信息的JSON数据（只需要基金在列表界面的显示信息） |
| 持有列表          | /user/havingList | email                                  | 返回用户持有的所有基金信息的JSON数据（列表需要显示的基金信息） |

​	// 几个问题

1. 首先是session在服务器端是如何进行储存的，可以保证多个用户在访问的时候不会出现交叉

   > 维护一个session，将每个用户都用key-value的形式加入到session中，前端每次进行请求的时候需要向后端传递email参数，然后判断对应的session是否存在

2. 是否需要为反馈，单独创建一个表，创建一个反馈的类

#### Fund类接口

| 接口功能         | 接口名称              | 输入参数               | 返回值                                                       |
| ---------------- | --------------------- | ---------------------- | ------------------------------------------------------------ |
| 默认基金列表显示 | /fund/queryDefault    | 无                     | 默认基金列表的信息的查询结果的json格式数据（这里的基金信息是[外部接口](https://api.doctorxiong.club/v1/fund)提供的，需要提取有用的信息） |
| 基金涨幅排序查看 | /fund/queryByIncrease | increaseTime           | 返回按照涨幅时间对基金进行降序排序的基金结果的JSON数据（[外部接口](https://api.doctorxiong.club/v1/fund)） |
| 基金分类筛选查看 | /fund/queryByParams   | 输入需要查询的条件和值 | 返回对应类型的基金类型数据JSON，可以使用的外部接口[基金排行](https://api.doctorxiong.club/v1/fund/rank) |
| 基金搜索         | /fund/searchFund      | 基金代码或者基金名称   | 返回对应的基金列表JSON（可以调用已有的基金排行的接口）       |
| 基金详情查看     | /fund/details         | 基金代码               | 返回对应基金的详情信息（现有接口[基金详情](https://api.doctorxiong.club/v1/fund/detail)） |
| 基金业绩走势     | /fund/trend           | 基金代码               | 返回一系列的点坐标？？？？？                                 |
| 个性化信息       | /fund/selfMsg         | email、基金代码        | 查询本地数据库中用户购买基金情况，计算收益情况，返回最终的收益 |
| 热门基金         | /fund/hot             | 无                     | 使用外部接口[热门基金](https://api.doctorxiong.club/v1/fund/hot)，返回处理过后的JSON数据 |
| AI基金推荐       | /fund/recommend       | email                  | 返回推荐的基金信息JSON（需要处理已有的数据，计算一些指标）   |
| 添加关注基金     | /fund/addWatch        | email、基金代码        | 返回关注的基金信息JSON（向对应的关注列表中添加数据）         |
| 删除关注基金     | /fund/deleteWatch     | email、基金代码        | 返回删除的关注基金信息JSON（删除关注记录）                   |
| 添加持有基金     | /fund/addHaving       | email、基金代码        | 返回添加的持有基金信息JSON（相对应的持有列表中添加数据，删除的功能应该是检测持有基金的数量为0的时候自动删除） |

// 可能存在的问题

1. 基金分类筛选：自己定义的条件需要进行计算，无法直接进行获取，其中混合型、股票型、债券型、指数型可以直接调用接口；QDII、FOF需要对已有的数据进行计算

2. 首页后端

3. 走势图应该怎么画

4. 各个基金信息界面具体需要显示哪些信息：包括首页、基金详情页、自选页面、持有页面（总体来说分为两个，一个是列表，一个是单个基金的详情）

   




#### fundOperation类的接口


| 接口功能 | 接口名称           | 输入参数                     | 返回值                                                   |
| -------- | ------------------ | ---------------------------- | -------------------------------------------------------- |
| 模拟买入 | /fundOperation/buy | 用户账号，基金代码，购入金额 | 扣除相应金额、添加用户持有基金，返回是否成功买入         |
| 模拟卖出 | /fundOperation     | 用户账号，基金代码，卖出份额 | 修改用户持有基金、添加扣除卖出费率之后的金额（判断时间） |



#### Admin类的接口

| 接口功能   | 接口名称          | 输入参数   | 返回值                                                       |
| ---------- | ----------------- | ---------- | ------------------------------------------------------------ |
| 管理员登陆 | /admin/login      | email、pwd | 返回管理员user类的JSON数据                                   |
| 上架基金   | /admin/fundOn     | 基金代码   | 返回是否成功上架（维护基金的上下架的状态）                   |
| 下架基金   | /admin/fundOff    | 基金代码   | 返回是否成功下架（维护基金的上下架的状态，或者建立对应的表） |
| 用户管理   | /admin/userDelete | email      | 返回删除的User的JSON格式数据（修改对应的用户表）             |
| 反馈列表   | /admin/feedback   | 无         | 返回所有的反馈信息的JSON格式数据                             |



// 可能的问题

1. 前面用户可以查看的所有基金需要保证在上架的基金列表中





// 目前看来需要设计的数据库表

1. 用户信息表
2. 基金信息表（包括上下架信息？）
3. 用户关注的基金表
4. 用户持有的基金表（包括用户持有的基金金额）
5. 反馈表
6. 如何获取画走势图的数据



